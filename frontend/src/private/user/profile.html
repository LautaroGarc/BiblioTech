<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Perfil - BiblioTech</title>
  <link rel="stylesheet" href="/css/userProfile.css">
</head>
<body>

  <main class="profile-container">
    <!-- Informaci贸n del usuario -->
    <section class="user-info-section">
      <div class="profile-picture">
        <img id="user-avatar" src="/assets/profiles/user-default.jpg" alt="Foto de perfil">
      </div>
      <div class="user-details">
        <h1 id="user-fullname">Nombre Apellido</h1>
        <p id="user-email">correo@ejemplo.com</p>
      </div>
    </section>

    <!-- Botones de acci贸n -->
    <section class="action-buttons">
      <button class="btn-editar" onclick="togglePopup()">
        <img src="/assets/icons/edit.png" alt="Editar" class="btn-icon">
        Editar perfil
      </button>
      <button class="btn-logout" onclick="window.location.href='/logout'">
        <img src="/assets/icons/logout.png" alt="Cerrar sesi贸n" class="btn-icon">
        Cerrar sesi贸n
      </button>
    </section>

    <!-- Grid de secciones -->
    <section class="section-grid">
      <!-- Medallas -->
      <a href="/medals" class="section-card">
        <div class="card-icon"></div>
        <h2>Tus Medallas</h2>
        <p id="medals-preview" class="card-preview">Cargando...</p>
      </a>

      <!-- Libros Likeados -->
      <a href="/liked" class="section-card">
        <div class="card-icon">わ</div>
        <h2>Libros Likeados</h2>
        <p id="likes-preview" class="card-preview">Cargando...</p>
      </a>

      <!-- Historial de reservas - Ocupa todo el ancho -->
      <a href="/history" class="section-card section-full">
        <div class="card-icon"></div>
        <h2>Historial de Reservas</h2>
        <p id="history-preview" class="card-preview">Cargando...</p>
      </a>
    </section>
  </main>

  <!-- Popup Editar Perfil -->
  <div id="popupEditarPerfil" class="popup-overlay">
    <div class="popup-content">
      <div class="popup-header">
        <h2>Editar perfil</h2>
        <button class="close-btn" onclick="togglePopup()"></button>
      </div>
      <form id="editForm" class="edit-form">
        <div class="form-group">
          <label for="edit-name">Nombre:</label>
          <input type="text" id="edit-name" name="name" required>
        </div>
        <div class="form-group">
          <label for="edit-lastname">Apellido:</label>
          <input type="text" id="edit-lastname" name="lastName" required>
        </div>
        <div class="form-group">
          <label for="photo-selector">Selecciona foto de perfil:</label>
          <div id="photo-selector" class="photo-grid">
            <!-- Las fotos se cargar谩n din谩micamente -->
          </div>
        </div>
        <div class="form-buttons">
          <button type="button" class="btn-cancelar" onclick="togglePopup()">Cancelar</button>
          <button type="submit" class="btn-guardar">Guardar cambios</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Navigation Component -->
  <div id="navigation-container"></div>

  <script src="/js/userProfile.js"></script>
  <script>
    // Load navigation component
    fetch('/components/navigation.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('navigation-container').innerHTML = data;
      })
      .catch(error => console.error('Error loading navigation:', error));
  </script>
</body>
</html>
