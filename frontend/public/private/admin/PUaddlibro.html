<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Libros</title>
    <link rel="stylesheet" href="styles/addlibro.css">
</head>
<body>

    
    <div class="container">

        <div class="btn-back">

            <button id ="back-btn">‚Üê Volver</button>

        </div>


        <div class="title">agregar libros</div>
        
        <form id="libroForm" onsubmit="handleSubmit(event)">
            <div class="form-group">
                <input type="text" class="input-field" placeholder="agregar nombre" id="nombre" required>
            </div>
            
            <div class="two-columns">
                <div class="form-group">
                    <input type="url" class="input-field" placeholder="agregar portada" id="portada">
                </div>
            
            <div class="form-group">
                <input type="text" class="input-field" placeholder="agregar autor" id="autor">
            </div>
            
            <div class="form-group">
                <input type="text" class="input-field" placeholder="add ISBN card" id="isbn">
            </div>
            
            <button type="button" class="scanner-button" onclick="openScanner()">
                üì∑ escanear
            </button>
        </form>
        
        <div class="submit-button" onclick="submitForm()"></div>
        
        <div id="successMessage" class="success-message"></div>
    </div>

    <script>
        function handleSubmit(event) {
            event.preventDefault();
            submitForm();
        }

        function submitForm() {
            const nombre = document.getElementById('nombre').value;
            const portada = document.getElementById('portada').value;
            const cantidad = document.getElementById('cantidad').value;
            const sinopsis = document.getElementById('sinopsis').value;
            const autor = document.getElementById('autor').value;
            const isbn = document.getElementById('isbn').value;

            // Validar campos requeridos
            if (!nombre || !cantidad) {
                alert('Por favor completa los campos obligatorios (nombre y cantidad)');
                return;
            }
            
            const formData = {
                nombre,
                portada,
                cantidad,
                sinopsis,
                autor,
                isbn
            };
            
            console.log('Datos del libro:', formData);
            
            // Mostrar mensaje de √©xito
            const successMessage = document.getElementById('successMessage');
            successMessage.textContent = `‚úì "${nombre}" agregado exitosamente con ${cantidad} unidad(es)`;
            successMessage.classList.add('show');
            
            // Limpiar formulario
            document.getElementById('libroForm').reset();
            
            // Ocultar mensaje despu√©s de 4 segundos
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 4000);
            
            // TODO: Aqu√≠ se implementar√≠a la llamada al backend
            // fetch('/api/add-libro', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify(formData)
            // })
            // .then(response => response.json())
            // .then(data => {
            //     console.log('Libro agregado:', data);
            // });
        }

        function openScanner() {
            console.log('Abriendo esc√°ner...');
            alert('Funci√≥n de esc√°ner - Por implementar\n\nAqu√≠ se integrar√° la funcionalidad para escanear c√≥digos ISBN');
            // TODO: Aqu√≠ se agregar√° la funcionalidad del esc√°ner
            // Por ejemplo, usando la API de Web Scanner o una librer√≠a como QuaggaJS
        }
    </script>
</body>
</html>